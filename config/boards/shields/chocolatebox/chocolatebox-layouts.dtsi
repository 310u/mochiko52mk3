#include "./position_map.dtsi"
#include <physical_layouts.dtsi>

/ {
    chocolatebox_physical_layout: chocolatebox_physical_layout {
        compatible = "zmk,physical-layout";
        display-name = "Chocolatebox";
        transform = <&default_transform>;
        kscan = <&kscan0>;
               keys  //                     w    h     x     y   rot  rx  ry
            /* Row0: RC(0,0..11) */
            = <&key_physical_attrs 100 100     0     0     0   300  0>  /* C0 */
            , <&key_physical_attrs 100 100   100     0    10   300  0>  /* C1 */
            , <&key_physical_attrs 100 100   200     0    10   300  0>  /* C2 */
            , <&key_physical_attrs 100 100   300     0    10   300  0>  /* C3 */
            , <&key_physical_attrs 100 100   400     0    10   300  0>  /* C4 */
            , <&key_physical_attrs 100 100   500     0    10   300  0>  /* C5 */
            , <&key_physical_attrs 100 100   800     0   350   900  0>  /* C6 */
            , <&key_physical_attrs 100 100   900     0   350   900  0>  /* C7 */
            , <&key_physical_attrs 100 100  1000     0   350   900  0>  /* C8 */
            , <&key_physical_attrs 100 100  1100     0   350   900  0>  /* C9 */
            , <&key_physical_attrs 100 100  1200     0   350   900  0>  /* C10 */
            , <&key_physical_attrs 100 100  1300     0     0   900  0>  /* C11 = 右小指列 */

            /* Row1: RC(1,1..11) */
            , <&key_physical_attrs 150 100     0   110   10    300  0>  /* C1: Q 1.5u */
            , <&key_physical_attrs 100 100   150   110   10    300  0>  /* C2 */
            , <&key_physical_attrs 100 100   250   110   10    300  0>  /* C3 */
            , <&key_physical_attrs 100 100   350   110   10    300  0>  /* C4 */
            , <&key_physical_attrs 100 100   450   110   10    300  0>  /* C5 */
            , <&key_physical_attrs 100 100   800   110  350    900  0>  /* C6 */
            , <&key_physical_attrs 100 100   900   110  350    900  0>  /* C7 */
            , <&key_physical_attrs 100 100  1000   110  350    900  0>  /* C8 */
            , <&key_physical_attrs 100 100  1100   110  350    900  0>  /* C9 */
            , <&key_physical_attrs 100 100  1200   110  350    900  0>  /* C10 */
            , <&key_physical_attrs 100 200  1300   110    0    900  0>  /* C11: Enter 縦2u（右小指列） */

            /* Row2: RC(2,1..10) */
            , <&key_physical_attrs 100 100     0   220   10    300  0>  /* C1 */
            , <&key_physical_attrs 100 100   100   220   10    300  0>  /* C2 */
            , <&key_physical_attrs 100 100   200   220   10    300  0>  /* C3 */
            , <&key_physical_attrs 100 100   300   220   10    300  0>  /* C4 */
            , <&key_physical_attrs 100 100   400   220   10    300  0>  /* C5 */
            , <&key_physical_attrs 100 100   800   220  350    900  0>  /* C6 */
            , <&key_physical_attrs 100 100   900   220  350    900  0>  /* C7 */
            , <&key_physical_attrs 100 100  1000   220  350    900  0>  /* C8 */
            , <&key_physical_attrs 100 100  1100   220  350    900  0>  /* C9 */
            , <&key_physical_attrs 100 100  1200   220    0    900  0>  /* C10 = 右小指列 */

            /* Row3: RC(3,0..10) */
            , <&key_physical_attrs 125 100     0   330    0    300  0>  /* C0: LShift 1.25u（左小指列） */
            , <&key_physical_attrs 100 100   150   330   10    300  0>  /* C1 */
            , <&key_physical_attrs 100 100   250   330   10    300  0>  /* C2 */
            , <&key_physical_attrs 100 100   350   330   10    300  0>  /* C3 */
            , <&key_physical_attrs 100 100   450   330   10    300  0>  /* C4 */
            , <&key_physical_attrs 100 100   800   330  350    900  0>  /* C5 */
            , <&key_physical_attrs 100 100   900   330  350    900  0>  /* C6 */
            , <&key_physical_attrs 100 100  1000   330  350    900  0>  /* C7 */
            , <&key_physical_attrs 100 100  1100   330  350    900  0>  /* C8 */
            , <&key_physical_attrs 100 100  1200   330  350    900  0>  /* C9 */
            , <&key_physical_attrs 225 100  1300   330    0    900  0>  /* C10: RShift 2.25u（右小指列） */

            /* Row4: RC(4,1),2,4,5,6,7,9,10 */
            , <&key_physical_attrs 100 100     0   440    0    300  0>  /* C1: GUI（左小指側列扱い） */
            , <&key_physical_attrs 125 100   100   440   10    300  0>  /* C2: LAlt 1.25u */
            , <&key_physical_attrs 225 100   250   440   10    300  0>  /* C4: Space 2.25u */
            , <&key_physical_attrs 100 100   500   440   10    300  0>  /* C5 */
            , <&key_physical_attrs 100 100   800   440  350    900  0>  /* C6 */
            , <&key_physical_attrs 100 100   900   440  350    900  0>  /* C7 */
            , <&key_physical_attrs 100 100  1100   440  350    900  0>  /* C9 */
            , <&key_physical_attrs 100 100  1200   440    0    900  0>  /* C10: 右端（右小指列） */
        ;

    };
};

&layouts_chocolatebox_position_map {
    layout_chocolatebox_map: layout_mable {
        physical-layout = <&chocolatebox_physical_layout>;
        positions
            = < 0  1  2  3  4  5    6  7  8  9 10 11>
            , <   11 12 13 14 15   16 17 18 19 20 21>
            , <   22 23 24 25 26   27 28 29 30 31>
            , <33 34 35 36 37 38   39 40 41 42 43>
            , <   44 45    46 47   48 49    50 51>

            ;
    };
};